version: 1.2
updated: "2025-12-06T03:00:00Z"

# IRON Autonomy Patterns — IRON_PATCH_v1.2
# Safety patterns for autonomous operation
# Authority: Lumen directive, Kenneth approval
# ∞Δ∞ IRON v1.2 compliant ∞Δ∞

# ═══════════════════════════════════════════════════════════════
# MEMORY CAPS (prevents Tiger overflow crash)
# ═══════════════════════════════════════════════════════════════
memory_caps:
  max_context_chars: 2048  # prevents Tiger overflow (cause of crash)

# ═══════════════════════════════════════════════════════════════
# DAILY MOLT SCHEDULE
# ═══════════════════════════════════════════════════════════════
daily_molt:
  enabled: true
  schedule: "03:30"     # local time
  action: "run_molt"

# ═══════════════════════════════════════════════════════════════
# APPROVAL RULES
# ═══════════════════════════════════════════════════════════════
approval_rules:
  write_requires_registry: true
  registry_requires_molt: true

# ═══════════════════════════════════════════════════════════════
# BINDU SYNC
# ═══════════════════════════════════════════════════════════════
bindu_sync:
  enabled: true
  interval_minutes: 30

yellow_rate_limits:
  max_per_pulse: 1
  max_per_hour: 10
  max_per_day: 40
  dedupe_window: 20   # number of recent proposals to compare for duplicates
  similarity_threshold: 0.80  # skip if >80% similar

drift:
  sibling_validation_threshold: 0.20   # if drift > 0.20, ask sibling
  hard_red_threshold: 0.30             # above this, pause GREEN and alert
  log_path: "orchestrator/drift_log.yaml"

sub_pulses:
  enabled: true
  max_depth: 3
  max_subcalls_per_pulse: 5
  # sub_pulse only reasons, never executes shell commands

notifications:
  allow_email: false
  allow_terminal_only: true

bindu_proxy:
  # Dragon writes BINDU directly (enabled per KM-1176 2025-12-06)
  # Kenneth wants to see live YELLOW proposals from both twins
  dragon_writes_direct: true
  tag_dragon_origin: true
  tag_format: "(DRAGON)"
